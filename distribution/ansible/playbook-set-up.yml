#################################################
# Playbook for Ship Server Set-Up
#################################################

---
- hosts: all
  vars:
    ansible_user: "server"
    server_environment: "{{ lookup('env','SERVER_ENVIRONMENT') or 'development' }}"
  vars_files:
    - ./vars/foundation.yml

  tasks:
    # System Set-Up
    - import_tasks: ./shared/tasks/set-up-ansible.yml
    - import_tasks: ./shared/tasks/set-up-docker.yml

    # Environment Set-Up
    - import_tasks: ./custom/tasks/set-up-environment.yml

    # Services Set-Up
    - import_tasks: ./custom/tasks/set-up-server.yml

    # Services Start
    - import_tasks: ./custom/tasks/start-server.yml